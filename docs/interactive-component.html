<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Interactive component | General Social survey</title>
  <meta name="description" content="Chapter 6 Interactive component | General Social survey" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Interactive component | General Social survey" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Interactive component | General Social survey" />
  
  
  

<meta name="author" content="Sai Prashanth Pathi, Vishwas Reddy Thuniki, Nishi Modi" />


<meta name="date" content="2021-12-13" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="results.html"/>
<link rel="next" href="conclusion.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Generalsocialsurvey</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#overview"><i class="fa fa-check"></i><b>1.1</b> Overview</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>2</b> Data sources</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-sources.html"><a href="data-sources.html#source"><i class="fa fa-check"></i><b>2.1</b> Source</a></li>
<li class="chapter" data-level="2.2" data-path="data-sources.html"><a href="data-sources.html#data"><i class="fa fa-check"></i><b>2.2</b> Data</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>3</b> Data transformation</a></li>
<li class="chapter" data-level="4" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>4</b> Missing values</a></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a>
<ul>
<li class="chapter" data-level="5.1" data-path="results.html"><a href="results.html#income"><i class="fa fa-check"></i><b>5.1</b> Income</a></li>
<li class="chapter" data-level="5.2" data-path="results.html"><a href="results.html#religion-vs-party-id"><i class="fa fa-check"></i><b>5.2</b> Religion vs Party-ID</a></li>
<li class="chapter" data-level="5.3" data-path="results.html"><a href="results.html#tv-hours"><i class="fa fa-check"></i><b>5.3</b> TV Hours</a></li>
<li class="chapter" data-level="5.4" data-path="results.html"><a href="results.html#race-religion-marital-status"><i class="fa fa-check"></i><b>5.4</b> Race, Religion &amp; Marital status</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>6</b> Interactive component</a></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Conclusion</a>
<ul>
<li class="chapter" data-level="7.1" data-path="conclusion.html"><a href="conclusion.html#learnings"><i class="fa fa-check"></i><b>7.1</b> Learnings</a></li>
<li class="chapter" data-level="7.2" data-path="conclusion.html"><a href="conclusion.html#future-scope"><i class="fa fa-check"></i><b>7.2</b> Future scope</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">General Social survey</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="interactive-component" class="section level1" number="6">
<h1><span class="header-section-number">Chapter 6</span> Interactive component</h1>
<html lang="en">
<head>
<meta charset="utf-8">
<title>
</title>
<script src="https://d3js.org/d3.v4.js"></script>
<style type ="text/css">
      
      #format1{
              font-size:20px;
              font-family:Roboto;}
              
        </style>
</head>
<body>
<p><text id="format1" x="200" y="80">Comparing average income over the years (2000-2014) for two human classes</text>
</svg></p>
<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
<p><br>
<text id="format1" x="200" y="80">Category1</text>
<select id="selectButton"></select>
<br>
<text id="format1" x="200" y="80">Category2</text>
<select id="selectButton2"></select></p>
<!-- Create a div where the graph will take place -->
<div id="filtered_data">

</div>
<script>
      
      var svg3 = d3.select("#svg3")
      var margin3 = {top: 100, right: 50, bottom: 30, left: 60}
      var width3 =  +svg3.attr("width") - margin3.left - margin3.right
      var height3 = +svg3.attr("height") - margin3.top - margin3.bottom
      var g3 = svg3.append("g").attr("transform", `translate(${margin3.left}, ${margin3.top})`);
      var parseTime = d3.timeParse("%b-%y");
      var xScale3 = d3.scaleTime().range([0, width3]);
      var yScale3 = d3.scaleLinear()
        .domain([0, 3500])
        .range([height3, 0]);
      
      
      </script>
<script>

// set the dimensions and margins of the graph
var margin = {top: 10, right: 30, bottom: 30, left: 60},
    width = 660 - margin.left - margin.right,
    height = 400 - margin.top - margin.bottom;

// append the svg object to the body of the page
var svg = d3.select("#filtered_data")
  .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform",
          "translate(" + margin.left + "," + margin.top + ")");
      
      //Read the data
d3.csv("https://gist.githubusercontent.com/sp3915/ba25c9f2ecbfd76c15629780424e57ca/raw/3eff2d3d661d058c2c290b163ff3f59b7237675f/gss_data",
       function(d){
    return { year : (d.year), name : d.name, n:d.n }
  },
       function(dataa) {

    // List of groups (here I have one group per column)
    var allGroup = d3.map(dataa, function(d){return(d.name)}).keys()

    // add the options to the button
    d3.select("#selectButton")
      .selectAll('myOptions')
        .data(allGroup)
      .enter()
        .append('option')
      .text(function (d) { return d; }) // text showed in the menu
      .attr("value", function (d) { return d; }) // corresponding value returned by the button
      
  
  // A color scale: one color for each group
    var myColor = d3.scaleOrdinal()
      .domain(allGroup)
      .range(d3.schemeSet2);

   // Add X axis --> it is a date format
    var x = d3.scaleLinear()
      .domain([2000, d3.max(dataa, function(d) { return +d.year; })])
      .range([ 0, width ]);
    svg.append("g")
      .attr("transform", "translate(0," + height + ")")
      .call(d3.axisBottom(x));

    // Add Y axis
    var y = d3.scaleLinear()
      .domain([500, d3.max(dataa, function(d) { return +d.n; })])
      .range([ height, 0 ]);
    svg.append("g")
      .call(d3.axisLeft(y));
       // Initialize line with first group of the list
    var line = svg
      .append('g')
      .append("path")
        .datum(dataa.filter(function(d){return d.name==allGroup[0]}))
        .attr("d", d3.line()
          .x(function(d) { return x(d.year) })
          .y(function(d) { return y(+d.n) })
        )
        .attr("stroke", function(d){ return myColor("valueA") })
        .style("stroke-width", 4)
        .style("fill", "none")

    // A function that update the chart
    function update_data(selectedGroup) {

      // Create new data with the selection?
      var dataFilter = dataa.filter(function(d){return d.name==selectedGroup})

      // Give these new data to update line
      line
          .datum(dataFilter)
          .transition()
          .duration(1000)
          .attr("d", d3.line()
            .x(function(d) { return x(d.year) })
            .y(function(d) { return y(+d.n) })
          )
          .attr("stroke", function(d){ return myColor(selectedGroup) })
    }

    // When the button is changed, run the updateChart function
    d3.select("#selectButton").on("change", function(d) {
        // recover the option that has been chosen
        var selectedOption = d3.select(this).property("value")
        // run the updateChart function with this selected option
        update_data(selectedOption)
    })

})

d3.csv("https://gist.githubusercontent.com/sp3915/ba25c9f2ecbfd76c15629780424e57ca/raw/3eff2d3d661d058c2c290b163ff3f59b7237675f/gss_data",
       function(d){
    return { year : (d.year), name : d.name, n:d.n }
  },
       function(dataa) {

    // List of groups (here I have one group per column)
    var allGroup = d3.map(dataa, function(d){return(d.name)}).keys()

    // add the options to the button
    d3.select("#selectButton2")
      .selectAll('myOptions')
        .data(allGroup)
      .enter()
        .append('option')
      .text(function (d) { return d; }) // text showed in the menu
      .attr("value", function (d) { return d; }) // corresponding value returned by the button
      
  
  // A color scale: one color for each group
    var myColor = d3.scaleOrdinal()
      .domain(allGroup)
      .range(d3.schemeSet2);

   // Add X axis --> it is a date format
    var x = d3.scaleLinear()
      .domain([2000, d3.max(dataa, function(d) { return +d.year; })])
      .range([ 0, width ]);
    svg.append("g")
      .attr("transform", "translate(0," + height + ")")
      .call(d3.axisBottom(x));

    // Add Y axis
    var y = d3.scaleLinear()
      .domain([500, d3.max(dataa, function(d) { return +d.n; })])
      .range([ height, 0 ]);
    svg.append("g")
      .call(d3.axisLeft(y));
       // Initialize line with first group of the list
    var line = svg
      .append('g')
      .append("path")
        .datum(dataa.filter(function(d){return d.name==allGroup[0]}))
        .attr("d", d3.line()
          .x(function(d) { return x(d.year) })
          .y(function(d) { return y(+d.n) })
        )
        .attr("stroke", function(d){ return myColor("valueA") })
        .style("stroke-width", 4)
        .style("fill", "none")

    // A function that update the chart
    function update_data(selectedGroup) {

      // Create new data with the selection?
      var dataFilter = dataa.filter(function(d){return d.name==selectedGroup})

      // Give these new data to update line
      line
          .datum(dataFilter)
          .transition()
          .duration(1000)
          .attr("d", d3.line()
            .x(function(d) { return x(d.year) })
            .y(function(d) { return y(+d.n) })
          )
          .attr("stroke", function(d){ return myColor(selectedGroup) })
    }

    // When the button is changed, run the updateChart function
    d3.select("#selectButton2").on("change", function(d) {
        // recover the option that has been chosen
        var selectedOption = d3.select(this).property("value")
        // run the updateChart function with this selected option
        update_data(selectedOption)
    })

})
      

</script>
</body>
</html>
<ul>
<li>The interactive plot lets us see the trend of average annual income over the years for each human category (class). The plot also allows us to easily compare the trend with another category and helps us see the difference in trends<br />
</li>
<li>The wealth distribution across different race, religion and political party affiliation can be clearly seen. Comparing any race, religion, etc also tells us whether any class had an economical advantage over others. These were the main questions that we set out to explore and can been answered from this single interactive graph, which would have otherwise taken multiple static graphs to explain</li>
</ul>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="results.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="conclusion.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/sp3915/Generalsocialsurvey/edit/main/06-interactive.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/sp3915/Generalsocialsurvey/blob/main/06-interactive.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
